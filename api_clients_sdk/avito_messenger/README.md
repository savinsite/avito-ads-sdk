# avito-messenger
API Мессенджера - набор методов для получения списка чатов пользователя на Авито, получения сообщений в чате, отправки сообщения в чат и другие Через API Мессенджера можно организовать интеграцию между мессенджером Авито и сторонней системой в обе стороны

**Авито API для бизнеса предоставляется согласно [Условиям использования](https://www.avito.ru/legal/pro_tools/public-api).**


This Python package is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1
- Package version: 1.0.0
- Generator version: 7.16.0
- Build package: org.openapitools.codegen.languages.PythonClientCodegen

## Requirements.

Python 3.9+

## Installation & Usage
### pip install

If the python package is hosted on a repository, you can install directly using:

```sh
pip install git+https://github.com/GIT_USER_ID/GIT_REPO_ID.git
```
(you may need to run `pip` with root permission: `sudo pip install git+https://github.com/GIT_USER_ID/GIT_REPO_ID.git`)

Then import the package:
```python
import avito_messenger
```

### Setuptools

Install via [Setuptools](http://pypi.python.org/pypi/setuptools).

```sh
python setup.py install --user
```
(or `sudo python setup.py install` to install the package for all users)

Then import the package:
```python
import avito_messenger
```

### Tests

Execute `pytest` to run the tests.

## Getting Started

Please follow the [installation procedure](#installation--usage) and then run the following:

```python

import avito_messenger
from avito_messenger.rest import ApiException
from pprint import pprint

# Defining the host is optional and defaults to https://api.avito.ru
# See configuration.py for a list of all supported configuration parameters.
configuration = avito_messenger.Configuration(
    host = "https://api.avito.ru"
)

# The client must configure the authentication and authorization parameters
# in accordance with the API server security policy.
# Examples for each auth method are provided below, use the example that
# satisfies your auth use case.

configuration.access_token = os.environ["ACCESS_TOKEN"]

configuration.access_token = os.environ["ACCESS_TOKEN"]


# Enter a context with an instance of the API client
with avito_messenger.ApiClient(configuration) as api_client:
    # Create an instance of the API class
    api_instance = avito_messenger.MessengerApi(api_client)
    authorization = 'Bearer ACCESS_TOKEN' # str | Токен для авторизации
    user_id = 56 # int | Идентификатор пользователя (клиента)
    chat_id = 'chat_id_example' # str | Идентификатор чата (клиента)

    try:
        # Прочитать чат
        api_response = api_instance.chat_read(authorization, user_id, chat_id)
        print("The response of MessengerApi->chat_read:\n")
        pprint(api_response)
    except ApiException as e:
        print("Exception when calling MessengerApi->chat_read: %s\n" % e)

```

## Documentation for API Endpoints

All URIs are relative to *https://api.avito.ru*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*MessengerApi* | [**chat_read**](docs/MessengerApi.md#chat_read) | **POST** /messenger/v1/accounts/{user_id}/chats/{chat_id}/read | Прочитать чат
*MessengerApi* | [**delete_message**](docs/MessengerApi.md#delete_message) | **POST** /messenger/v1/accounts/{user_id}/chats/{chat_id}/messages/{message_id} | Удаление сообщения
*MessengerApi* | [**get_chat_by_id_v2**](docs/MessengerApi.md#get_chat_by_id_v2) | **GET** /messenger/v2/accounts/{user_id}/chats/{chat_id} | Получение информации по чату
*MessengerApi* | [**get_chats_v2**](docs/MessengerApi.md#get_chats_v2) | **GET** /messenger/v2/accounts/{user_id}/chats | Получение информации по чатам
*MessengerApi* | [**get_messages_v3**](docs/MessengerApi.md#get_messages_v3) | **GET** /messenger/v3/accounts/{user_id}/chats/{chat_id}/messages/ | Получение списка сообщений V3
*MessengerApi* | [**get_subscriptions**](docs/MessengerApi.md#get_subscriptions) | **POST** /messenger/v1/subscriptions | Получение подписок (webhooks)
*MessengerApi* | [**get_voice_files**](docs/MessengerApi.md#get_voice_files) | **GET** /messenger/v1/accounts/{user_id}/getVoiceFiles | Получение голосовых сообщений
*MessengerApi* | [**post_blacklist_v2**](docs/MessengerApi.md#post_blacklist_v2) | **POST** /messenger/v2/accounts/{user_id}/blacklist | Добавление пользователя в blacklist
*MessengerApi* | [**post_send_image_message**](docs/MessengerApi.md#post_send_image_message) | **POST** /messenger/v1/accounts/{user_id}/chats/{chat_id}/messages/image | Отправка сообщения с изображением
*MessengerApi* | [**post_send_message**](docs/MessengerApi.md#post_send_message) | **POST** /messenger/v1/accounts/{user_id}/chats/{chat_id}/messages | Отправка сообщения
*MessengerApi* | [**post_webhook_unsubscribe**](docs/MessengerApi.md#post_webhook_unsubscribe) | **POST** /messenger/v1/webhook/unsubscribe | Отключение уведомлений (webhooks)
*MessengerApi* | [**post_webhook_v3**](docs/MessengerApi.md#post_webhook_v3) | **POST** /messenger/v3/webhook | Включение уведомлений V3 (webhooks)
*MessengerApi* | [**upload_images**](docs/MessengerApi.md#upload_images) | **POST** /messenger/v1/accounts/{user_id}/uploadImages | Загрузка изображений


## Documentation For Models

 - [AddBlacklistRequestBody](docs/AddBlacklistRequestBody.md)
 - [AddBlacklistRequestBodyUsersInner](docs/AddBlacklistRequestBodyUsersInner.md)
 - [AddBlacklistRequestBodyUsersInnerContext](docs/AddBlacklistRequestBodyUsersInnerContext.md)
 - [AuthError](docs/AuthError.md)
 - [AuthErrorError](docs/AuthErrorError.md)
 - [BadRequestError](docs/BadRequestError.md)
 - [BadRequestErrorError](docs/BadRequestErrorError.md)
 - [Chat](docs/Chat.md)
 - [ChatContext](docs/ChatContext.md)
 - [ChatContextValue](docs/ChatContextValue.md)
 - [ChatContextValueImages](docs/ChatContextValueImages.md)
 - [ChatContextValueImagesMain](docs/ChatContextValueImagesMain.md)
 - [ChatLastMessage](docs/ChatLastMessage.md)
 - [ChatRead200Response](docs/ChatRead200Response.md)
 - [ChatUsersInner](docs/ChatUsersInner.md)
 - [ChatUsersInnerPublicUserProfile](docs/ChatUsersInnerPublicUserProfile.md)
 - [ChatUsersInnerPublicUserProfileAvatar](docs/ChatUsersInnerPublicUserProfileAvatar.md)
 - [ChatUsersInnerPublicUserProfileAvatarImages](docs/ChatUsersInnerPublicUserProfileAvatarImages.md)
 - [Chats](docs/Chats.md)
 - [ForbiddenError](docs/ForbiddenError.md)
 - [ForbiddenErrorError](docs/ForbiddenErrorError.md)
 - [GetSubscriptions200Response](docs/GetSubscriptions200Response.md)
 - [GetSubscriptions200ResponseSubscriptionsInner](docs/GetSubscriptions200ResponseSubscriptionsInner.md)
 - [MessageContent](docs/MessageContent.md)
 - [MessageContentCall](docs/MessageContentCall.md)
 - [MessageContentImage](docs/MessageContentImage.md)
 - [MessageContentItem](docs/MessageContentItem.md)
 - [MessageContentLink](docs/MessageContentLink.md)
 - [MessageContentLinkPreview](docs/MessageContentLinkPreview.md)
 - [MessageContentLocation](docs/MessageContentLocation.md)
 - [MessageContentVoice](docs/MessageContentVoice.md)
 - [MessageQuote](docs/MessageQuote.md)
 - [MessagesInner](docs/MessagesInner.md)
 - [NotFoundError](docs/NotFoundError.md)
 - [NotFoundErrorError](docs/NotFoundErrorError.md)
 - [PayloadStruct](docs/PayloadStruct.md)
 - [PostSendImageMessage200Response](docs/PostSendImageMessage200Response.md)
 - [PostSendImageMessage200ResponseContent](docs/PostSendImageMessage200ResponseContent.md)
 - [PostSendImageMessage200ResponseContentImage](docs/PostSendImageMessage200ResponseContentImage.md)
 - [PostSendMessage200Response](docs/PostSendMessage200Response.md)
 - [PostSendMessage200ResponseContent](docs/PostSendMessage200ResponseContent.md)
 - [PostWebhookV3201Response](docs/PostWebhookV3201Response.md)
 - [PurchasingError](docs/PurchasingError.md)
 - [PurchasingErrorError](docs/PurchasingErrorError.md)
 - [SendImageMessageRequestBody](docs/SendImageMessageRequestBody.md)
 - [SendMessageRequestBody](docs/SendMessageRequestBody.md)
 - [SendMessageRequestBodyMessage](docs/SendMessageRequestBodyMessage.md)
 - [ServiceError](docs/ServiceError.md)
 - [ServiceErrorError](docs/ServiceErrorError.md)
 - [ServiceUnavailableError](docs/ServiceUnavailableError.md)
 - [ServiceUnavailableErrorError](docs/ServiceUnavailableErrorError.md)
 - [ValidatingError](docs/ValidatingError.md)
 - [ValidatingErrorError](docs/ValidatingErrorError.md)
 - [VoiceFiles](docs/VoiceFiles.md)
 - [WebhookMessage](docs/WebhookMessage.md)
 - [WebhookSubscribeRequestBody](docs/WebhookSubscribeRequestBody.md)


<a id="documentation-for-authorization"></a>
## Documentation For Authorization


Authentication schemes defined for the API:
<a id="AuthorizationCode"></a>
### AuthorizationCode

- **Type**: OAuth
- **Flow**: accessCode
- **Authorization URL**: https://avito.ru/oauth
- **Scopes**: 
 - **autoload:reports**: Получение отчетов Автозагрузки
 - **items:apply_vas**: Применение дополнительных услуг
 - **items:info**: Получение информации об объявлениях
 - **job:applications**: Получение информации об откликах на вакансии
 - **job:cv**: Получение информации резюме
 - **job:write**: Изменение объявлений вертикали Работа
 - **messenger:read**: Чтение сообщений в мессенджере Авито
 - **messenger:write**: Модифицирование сообщений в мессенджере Авито
 - **short_term_rent:read**: Получение информации об объявлениях краткосрочной аренды
 - **short_term_rent:write**: Изменение объявлений краткосрочной аренды
 - **stats:read**: Получение статистики объявлений
 - **user:read**: Получение информации о пользователе
 - **user_balance:read**: Получение баланса пользователя
 - **user_operations:read**: Получение истории операций пользователя

<a id="ClientCredentials"></a>
### ClientCredentials

- **Type**: OAuth
- **Flow**: application
- **Authorization URL**: 
- **Scopes**: N/A


## Author

supportautoload@avito.ru


